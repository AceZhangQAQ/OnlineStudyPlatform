<!DOCTYPE html>
<html  xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
   <head>
        <title>后台管理</title>
        <meta charset="utf-8">
        <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
	   <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
	   <link href="/css/style.css" rel="stylesheet" type="text/css"/>
	   <script type="text/javascript" src="/js/common/jquery.js"></script>
	   <script type="text/javascript" src="/js/common/common.js" charset='utf-8'></script>
	   <script type="text/javascript" src="/js/common/bootstrap.min.js"></script>
	   <script type="text/javascript" src="/js/cms/cmshead.js"></script>
	   <script type="text/javascript" src="/js/cms/classifycourse/classifyinfo.js"></script>
	   <!-- 引入资源文件 -->
	   <div th:replace="common/cmshead :: cmshead"></div>
   </head>
   
   <body>

	<div class="content">
		<div class="container-fluid">
			
			<div id="queryPageForm" class="mt-15"  action="" method="POST">
			<div class="row-fluid">
				<div class="cms-search">
                	<a href="javascript:void(0)"  sortField="update_time" class="search-sort-block " >
	                	<span>更新时间</span>

	                	<span>▼</span><#else><span>▲</span>

                	</a>
                	<a href="javascript:void(0)" sortField="weight" class="search-sort-block">
                		<span>推荐权重</span>
	                	<span>▼</span><span>▲</span>
                	</a>
                	<input type="hidden" id="sortField" name="sortField" value="${page.sortField!}" />
                	<input type="hidden" id="sortDirection" name="sortDirection" value="${page.sortDirection!'DESC'}" />
                	<input type="text" class="search-text" name="name" value="${(queryEntity.name)!}"  style="margin-top:5px;" placeholder="请输入课程名称">
                	<input type="submit" class="search-btn" value="搜索" />
                	<input type="button" class="search-btn" onclick="window.location.href='${s.base}/course/add.html'" value=" + 添加课程 " />
                </div>
			</div>
			
			<div class="row-fluid">
				<div class="block span6">
					<div id="widget2container" class="block-body">
						<table class="table list">
							<tbody id="course">
							</tbody>
						</table>

						
					</div>
				</div>
			</div>
			</div>
			
		</div>
		<div class="page">
			<ul class="pagination"></ul>
		</div>
		<!-- 分页-end -->
	</div>
	
	<!-- 弹出层 alert 信息 -->  
    <div class="modal" id="_ocDialogModal" tabindex="-1" aria-hidden="true">
		<div class="modal_wapper small">
			<div class="modal-dialog w-4" >
				<div class="modal-content">
					<div class="modal-header">
						<div class="modal-title f-16" >提示信息</div>
					</div>
					<div class="modal-body">
						<div><span class="color-oc f-16 oc-content"></span></div>
					</div>
					<div class="modal-footer modal-center">
						<button type="button" class="btn btn-primary oc-ok">确 定</button>
						<button type="button" class="btn btn-default oc-cancel">取 消</button>
					</div>
				</div>
			</div>
		</div>
	</div>
  <!-- 弹出层 alert 信息 --> 
	
	<script type="text/javascript">
		$(function(){
			$('.search-sort-block').click(function(){
				//排序字段 
				var field = $(this).attr('sortField');
				if(field != ''){
					$('#sortField').val(field);
				}else{
					return;
				}
				//排序方向 
				var directSpan = $(this).find('span')[1];
				if(directSpan == undefined || directSpan.innerText == '▲'){ 
					$(directSpan).html('▼');
					$('#sortField').val(field);
					$('#sortDirection').val('DESC');
				}else{
					$(directSpan).html('▲');
					$('#sortField').val(field);
					$('#sortDirection').val('ASC');
				}
				_queryPage();//分页
			});
		});
		
		//课程上下架
		function doSale(id,sale){
			if(sale == 0){
				sale = 1;
			}else{
				sale = 0;
			}
			$.ajax({
				url:'${s.base}/course/doSale.html',
			    type:'POST',
			    dataType:'json',
			    data:{"id":id,onsale:sale},
			    success:function(resp){
			    	var errcode = resp.errcode;
			    	if(errcode == 0){
			    		_queryPage();
			    	}
			    } 
			});
		}
		
		//课程删除
		function doDelete(id){
			Modal.confirm('课程章节将一并删除，确定删除?',function(){
				$.ajax({
					url:'${s.base}/course/doDelete.html',
				    type:'POST',
				    dataType:'json',
				    data:{"id":id},
				    success:function(resp){
				    	var errcode = resp.errcode;
				    	if(errcode == 0){
				    		$('#tr-'+id).remove();
				    	}
				    } 
				});
			});
		}
		
		
	</script>
</body>
</html>
